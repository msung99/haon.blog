---
title: Spring IoC Container κ³Ό μ¤ν”„λ§ λΉ(Spring Bean)
date: "2024-07-16"
tags:
  - Spring
previewImage: spring.png
---

> π’΅ ν„ ν¬μ¤νΈ ν•™μµλ™κΈ°λ” μ§€λ‚ [μ¤ν”„λ§ μ»¨ν…μ΄λ„μ μ μ–΄μ μ—­μ „(IoC) κ³Ό μμ΅΄μ„± μ£Όμ…(DI)](https://haon.blog/spring/loc/) μ—μ„ μ΄μ–΄μ§€λ” λ‚΄μ©μ΄λ‹¤.

μ§€λ‚ ν¬μ¤νΈμ—μ„ `IoC(Inversion Of Control)` κ³Ό `DI(Dependency Injection)` μ— λ€ν•΄ λ‹¤λ£¨μ—λ‹¤. λ‹¤λ§ μ¤ν”„λ§λ¶€νΈμ—μ„ μ κ³µν•λ” IoC μ»¨ν…μ΄λ„μ— κ΄€ν• λ‚΄μ©μ„ μμ„Έν λ‹¤λ£¨μ§€ μ•κ³ , IoC μ™€ DI λΌλ” κ·Έ μμ²΄μ κ°λ…μ— λ€ν•΄μ„λ§ μ§‘μ¤‘μ μΌλ΅ λ‹¤λ£¨μ—λ‹¤. μ΄λ²μ—λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— μ–΄λ–»κ² IoC λ¥Ό μ κ³µν•λ”μ§€, κ°λ°μκ°€ μ–΄λ–»κ² DI λ¥Ό μ κ³µν•  μ μλ”μ§€μ— λ€ν•΄ λ‹¤λ£¨μ–΄λ³΄κ³ μ ν•λ‹¤.


## μ¤ν”„λ§ λΉ (Spring Bean)

![alt text](image-1.png)

`μ μ–΄μ μ—­μ „(IoC)` μ€ μ  3μμΈ μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬μ—κ² κ°μ²΄μ μƒλ…μ£ΌκΈ°μ— λ€ν• μ μ–΄κ¶μ„ λ„κ²¨μ£Όλ” κ²ƒμ„ λ»ν•λ‹¤κ³  ν–λ‹¤. μ΄λ• μ¤ν”„λ§ ν”„λ μ„μ›ν¬ μƒνƒκ³„μ—μ„ μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬λ€ μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό λ»ν•λ‹¤. μ¤ν”„λ§μ€ μ¤ν”„λ§ μ»¨ν…μ΄λ„ λ‚΄μ—μ„ μ μ–΄μ μ—­μ „(IoC) λ΅ κ°μ²΄λ¥Ό κ΄€λ¦¬ν•λ”λ°, μ΄λ• **μ¤ν”„λ§μ΄ μ μ–΄ κ¶ν•μ„ κ°€μ Έ μ§μ ‘ μƒμ„±ν•κ³  κ΄€κ³„λ¥Ό λ¶€μ—¬ν•λ” κ°μ²΄λ¥Ό** `Bean` **μ΄λΌκ³  ν•λ‹¤.** μ¦‰, Spring Bean μ€ μ¤ν”„λ§ μ»¨ν…μ΄λ„κ°€ μƒμ„±, κ΄€κ³„μ„±μ •, μ‚¬μ©λ“±μ„ μ μ–΄ν•΄μ£Όλ” μ μ–΄μ μ—­μ „μ΄ μ μ©λ κ°μ²΄λ¥Ό λ»ν•λ‹¤.

μ¤ν”„λ§μ€ λ‚΄λ¶€μ— μ¤ν”„λ§ μ»¨ν…μ΄λ„λΌλ” κ²ƒμ΄ κµ¬ν„λμ–΄μλ‹¤. μ΄ μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” IoC Container λΌκ³ λ„ λ¶λ¦¬λ”λ°, λ§ κ·Έλ€λ΅ IoC λ¥Ό μ κ³µν•΄μ£Όλ” νΉμ •ν• μ»¨ν…μ΄λ„ κ³µκ°„μΌλ΅ κµ¬ν„λμ–΄μλ‹¤. μ΄ μ»¨ν…μ΄λ„ κ³µκ°„ μ•μ—λ” μ¤ν”„λ§μ—μ„ μμ²΄μ μΌλ΅ κ΄€λ¦¬ν•λ” Spring Bean μ΄ μ΅΄μ¬ν•λ‹¤. μ°λ¦¬λ” κ°μ²΄κ°„μ μμ΅΄μ„± μ •λ³΄λ¥Ό `μƒμ„±μ μ£Όμ…` μ„ ν†µν•΄ μ κ³µν•΄μ£ΌκΈ°λ§ ν•λ©΄, μ¤ν”„λ§ μ»¨ν…μ΄λ„λ‚΄μ— Bean κ°μ²΄κ°€ μλ™μΌλ΅ μƒμ„±λκ³ , κ΄€λ¦¬λλ‹¤. μ΄ν›„ ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν•  λ–„ λ§λ‹¤ λ§¤λ² κ°λ°μκ°€ μ§μ ‘ κ°μ²΄λ¥Ό μƒμ„±ν•μ—¬ μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” λ°©μ‹μ΄ μ•„λ‹, Spring IoC Container λ‚΄μ— μƒμ„±λ μ¤ν”„λ§ Bean κ°μ²΄λ¥Ό λ¶λ¬μ™€ μ‚¬μ©ν•  μ μκ² λλ‹¤.

λν• μ¤ν”„λ§ μ»¨ν…μ΄λ„λΌλ” μ™Έλ¶€μ μ  3μμ—κ² κ°μ²΄μ μƒλ…μ£ΌκΈ° κ΄€λ¦¬ μ μ–΄κ¶μ„ μ›ν™ν λ„λ§΅κΈ°κΈ° μ„ν•΄μ„ , μ°λ¦¬κ°€ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ—μ„ κ΄€λ¦¬λ  κ° κ°μ²΄λ“¤κ°„μ μµμ†ν•μ κ΄€κ³„(relationship) μ •λ³΄, μ¦‰ μμ΅΄κ΄€κ³„ μ •λ³΄λ¥Ό λ„κ²¨μ¤μ•Όν•λ‹¤. κ·Έλμ•Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„κ°€ μ–΄λ–¤ κ° κ°μ²΄λ“¤κ°„μ μμ΅΄κ΄€κ³„λ¥Ό νμ•…ν•κ³ , μƒν™©μ— μ•λ§λ” μμ΅΄μ„±μ„ μ»¨ν…μ΄λ„λ‚΄μ— λ“±λ΅ν•μ—¬ μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ„λΉ„μ¤λ¥Ό μ κ³µν•  μ μμ„ κ²ƒμ΄λ‹¤. μ¤ν”„λ§ ν”„λ μ„μ›ν¬λ” ν”„λ΅κ·Έλλ¨Έκ°€ μ½”λ“λ¥Ό μ‘μ„±ν•μ—¬ μ κ³µν•΄μ¤€ μµμ†ν•μ μμ΅΄κ΄€κ³„ μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅, μ¤ν”„λ§ μ»¨ν…μ΄λ„λ‚΄μ— κ°μ²΄(Bean) λ¥Ό λ“±λ΅ν•κ³ , κ΄€λ¦¬ν•λ‹¤. μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² ν•„μ”ν• μμ΅΄κ΄€κ³„λ¥Ό μλ™μΌλ΅ μ κ³µν•΄μ¤€λ‹¤. μ΄λ¥Ό `DI(Dependency Injection)` μ΄λΌκ³  ν•λ‹¤. **μ¦‰, DI λ€ μμ΅΄μ„± μ£Όμ…μ΄λΌλ” κ°λ…μΌλ΅, κ°μ²΄κ°„μ μμ΅΄μ„±μ„ μ™Έλ¶€(μ¤ν”„λ§ μ»¨ν…μ΄λ„)μ—μ„ μ£Όμ…ν•λ” λ°©μ‹μ„ λ»ν•λ‹¤.** 

μµμ†ν•μ μμ΅΄κ΄€κ³„ μ •λ³΄λ§μ„ μ κ³µν•λ©΄ Spring IoC Container λ‚΄μ—μ„ μλ™μΌλ΅ κ°μ²΄(Bean) μ„ κ΄€λ¦¬ν•κ³ , ν΄λΌμ΄μ–ΈνΈμ—κ² ν•„μ”ν• μ μ—°ν• μμ΅΄μ„±μ„ μ£Όμ…ν•΄μ¤€λ‹¤. μ΄ μμ΅΄κ΄€κ³„ μ •λ³΄λ¥Ό μ¤ν”„λ§μ—κ² μ κ³µν•λ” λ°©λ²•μ€ μ•„μ£Ό κ°„λ‹¨ν• μ½”λ“(μ–΄λ…Έν…μ΄μ… λ“±)λ¥Ό μ‘μ„±ν•κΈ°λ§ ν•λ©΄ λλ‹¤. μ΄μ— λ€ν• λ‚΄μ©μ€ μ•„λμ—μ„ λ‹¤λ£¨μ–΄λ³΄κ² λ‹¤.

κΈ°λ³Έμ μΌλ΅ Spring IoC Container λ‚΄μ— λ“±λ΅λλ” Bean κ°μ²΄λ“¤μ€ `μ‹±κΈ€ν†¤(SingleTon)` μΌλ΅ κ΄€λ¦¬λλ‹¤. λν• Spring IoC Container λ΅λ” `Bean Factory` μ™€ `Application Context`  κ°€ μ‚¬μ©λλ‹¤. μ”μ¦μ€ Bean Factory λ¥Ό ν™•μ¥ν• `Application Context` λ¥Ό κ΄€λ΅€μ μΌλ΅ μ‚¬μ©ν•λ” μ¶”μ„ΈλΌκ³  ν•λ‹¤. μ΄λ“¤μ— λ€ν• μ΄ν•΄λ„λ” μ•„μ§ λ†’μ§€ μ•κΈ° λ–„λ¬Έμ—, μ¶”κ°€ ν•™μµμ΄ ν•„μ”ν•λ‹¤.


## μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— Bean λ“±λ΅ν•κΈ°

λ°±λ¬Έμ΄λ¶μ–΄μΌνƒ€. μ§μ ‘ μ¤ν”„λ§ ν”„λ μ„μ›ν¬μ—μ„ μ κ³µν•λ” κΈ°λ¥λ“¤λ΅ μ–΄λ–»κ² Bean μ„ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅ν•κ³  κ΄€λ¦¬ν•λ”μ§€ κ°„λ‹¨ν• μ½”λ“λ¥Ό μ‘μ„±ν•΄λ³΄μ. 

### Bean μΌλ΅ μμ΅΄μ„± μ£Όμ…ν•κΈ°

Spring Bean μ„ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅ν•λ” λ°©λ²•μ—λ” ν¬κ² 3κ°€μ§€λ΅ λ‚λ‰λ‹¤.

> - (1) xmlμ— μ§μ ‘ λ“±λ΅
> - (2) μλ™μΌλ΅ μ§μ ‘ μμ΅΄κ΄€κ³„ λ“±λ΅ : Bean μ„¤μ •νμΌμ— μ§μ ‘ Bean μ„ λ“±λ΅
> - (3) μλ™μΌλ΅ μμ΅΄κ΄€κ³„ λ“±λ΅ : μ΄λ―Έ μ κ³µλλ” μ–΄λ…Έν…μ΄μ… ν™μ©ν•¨. @Component, @Controller, @Service, @Repository μ–΄λ…Έν…μ΄μ…μ„ ν™μ©

κ³Όκ±°μ—λ” XML λ΅ λΉμ„ μ„¤μ •ν•κ³  κ΄€λ¦¬ν•λ” λ°©μ‹μ΄ μ΄λ£¨μ–΄μ΅μ§€λ§, μ΄μ    μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•μ—¬ λΉμ„ κ°„νΈν λ“±λ΅ν•κ³ , DI λ¥Ό ν•  μ μλ„λ΅ κ°μ„ λμ—λ‹¤. μ‚¬μ‹¤μƒ `(1)` μ€ μ”μ¦ κ±°μ μ‚¬μ©λμ§€ μ•λ” λ°©λ²•μ΄λ‹, κ°€λ³κ²λ§ λ‹¤λ£¨λ„λ΅ ν•λ‹¤.

### XML μ— μ§μ ‘ λ“±λ΅ν•κΈ°

`<bean>` νƒκ·Έλ¥Ό μ§μ ‘ μ‚¬μ©ν•λ” λ°©μ‹μ΄λ‹¤. application-config.xml μ„ resource μ•„λμ— λ§λ“¤μ–΄ μ¤€λ‹¤. κ·Έλ¦¬κ³  <beans> νƒκ·Έ μ•μ— <bean>μ„ λ§λ“¤μ–΄ μ¤€λ‹¤. μ„μ μ½”λ“λ” μμ΅΄μ„± μ£Όμ…κΉμ§€ ν• μ½”λ“μ΄λ‹¤. 

~~~java
<bean id="helloService" class="com.example.myapp.di.HelloService"/>

<bean id="helloController" class="com.example.myapp.di.HelloController" p:helloService-ref="helloService">		
</bean>
~~~

### Bean μ„¤μ •νμΌμ— μλ™μΌλ΅ μ§μ ‘ Bean μ„ λ“±λ΅

μ¤ν”„λ§ Bean μ„ λ“±λ΅ν•λ” κ°€μ¥ κ·Όλ³Έμ μΈ μ½”λ“μ΄λ‹¤. μλ°” ν΄λμ¤λ¥Ό μƒμ„±ν•κ³ , κ·Έ μ„μ— `@Configuration` μ–΄λ…Έν…μ΄μ…μ„ λ…μ‹ν•΄μ¤€λ‹¤. λ°”λ΅ μ•„λμ—μ„ μ‚΄ν΄λ³Ό `@Controller`, `@Component` μ™€ κ°™μ€ μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν• λ°©λ²•μ€ μμ΅΄κ΄€κ³„κ°€ μλ™μΌλ΅ λ“±λ΅λλ” λ°©μ‹μ΄λΌλ©΄, μ΄ λ°©μ‹μ€ Bean μμ΅΄κ΄€κ³„λ¥Ό μλ™μΌλ΅ μ§μ ‘ λ“±λ΅ν•κ³ μ ν• λ• μ‚¬μ©ν•λ” λ°©μ‹μ΄λ‹¤. 

`@Configuration` μ•μ—λ” `@Component` λ¥Ό λ‚΄λ¶€μ μΌλ΅ μ‚¬μ©ν•κΈ° λ–„λ¬Έμ— `@Configuration` μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΈ ν•΄λ‹Ή ν΄λμ¤λ” `@ComponentScan` μ λ€μƒμ΄ λλ‹¤. κ·Έλ¦¬κ³  κ·Έμ—λ”°λΌ Bean μ„¤μ • μ •λ³΄κ°€ μ½ν λ•, κ·Έ μ•μ— μ •μλ Bean λ“¤μ΄ IoC μ»¨ν…μ΄λ„κ°€ λ“±λ΅λλ‹¤.

~~~java
@Configuration
public class AppConfig {

    @Bean
    public Item item1() {
        return new ItemImpl1();
    }

    @Bean
    public Store store() {
        return new Store(item1());
    }
}
~~~

κ·Έλ¦¬κ³  μ•„λμ²λΌ Main μ—μ„ μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•κΈ° μ„ν•΄ `AnnotationConfigApplicationContext` λ¥Ό μ‚¬μ©ν•λ‹¤.

~~~java
public class HelloMain {

	public static void main(String[] args) {
		AbstractApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class); 

		System.out.println("-----------------------");
		HelloController controller = context.getBean("helloController", HelloController.class);
		controller.hello("ν™κΈΈλ™");
		System.out.println("=====================");
		context.close();
		}
}
~~~

### μ΄λ―Έ μ κ³µλλ” μ–΄λ…Έν…μ΄μ…μΌλ΅ μλ™μΌλ΅ μμ΅΄κ΄€κ³„λ¥Ό λ“±λ΅

![alt text](image-2.png)

μ•μ„  `(2)` λ°©μ‹μ€ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— κ°λ°μκ°€ μ§μ ‘ μ¶”κ°€μ μΌλ΅, μ§μ ‘ μλ™μΌλ΅ λ“±λ΅ν•κ³  μ‹¶μ€ νΉλ³„ν• κ°μ²΄κ°€ μ΅΄μ¬ν•  λ–„ μ£Όλ΅ μ‚¬μ©ν•  κ²ƒμ΄λ‹¤. κ·Έλ¬λ‚, λ€λ¶€λ¶„μ κ²½μ° μ¤ν”„λ§μ—μ„ μ΄λ―Έ μ κ³µν•κ³  μλ” μ–΄λ…Έν…μ΄μ…λ“¤μ΄ μ΅΄μ¬ν•λ‹¤. μ΄λ“¤μ„ ν™μ©ν•λ©΄ μλ™μΌλ΅ Bean μ΄ λ“±λ΅λλ‹¤. λν• μ΄ μ–΄λ…Έν…μ΄μ…λ“¤μ„ μ¤‘μ‹¬μΌλ΅ Bean μ„ μμ£Ό λ“±λ΅ν•κ² λ  κ²ƒμ΄λ‹¤.

- `@Controller` : ν•΄λ‹Ή ν΄λμ¤κ°€ Presentation Layer μ—μ„ μ»¨νΈλ΅¤λ¬μ„μ„ λ…μ‹ν•¨.
- `@Service` : ν•΄λ‹Ή ν΄λμ¤κ°€ Application Layer μ—μ„ Service μ„μ„ λ…μ‹ν•¨.
- `@Repository` : ν•΄λ‹Ή ν΄λμ¤κ°€ Persistence Layer μ—μ„ DAO μ„μ„ λ…μ‹ν•λ‹¤.
- `@Component` : μ„ 3κ°€μ§€ κ²½μ° μ΄μ™Έμ— Bean μΌλ΅ λ“±λ΅ν•κ³  μ‹¶μ€ ν΄λμ¤μ— λ…μ‹ν•λ‹¤.

μ„ μ–΄λ…Έν…μ΄μ…λ“¤μ„ λ¶™μ΄λ©΄ μ¤ν”„λ§μ΄ μλ™μΌλ΅ `μ»΄ν¬λ„νΈ μ¤μΊ”` μ„ μ§„ν–‰ν•μ—¬ κ° κ°μ²΄λ“¤κ°„μ μμ΅΄κ΄€κ³„λ¥Ό μ½μ–΄λ“¤μΈλ‹¤. κ·Έλ¦¬κ³  κ·Έλ“¤μ„ κΈ°λ°μΌλ΅ μλ™μΌλ΅ Spring Bean κ°μ²΄λ΅ λ“±λ΅ν•λ‹¤. 

μ¶”κ°€μ μΌλ΅ `@ComponentScan` μ΄λΌλ” μ–΄λ…Έν…μ΄μ…μ΄ μ΅΄μ¬ν•λ‹¤. μ΄ μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ–΄μλ” ν΄λμ¤κ°€ μλ” ν¨ν‚¤μ§€μ—μ„λ¶€ν„° λ¨λ“  ν•μ„ ν¨ν‚¤μ§€μ λ¨λ“  ν΄λμ¤λ¥Ό ν›‘μ–΄λ³΄λ©° `@Component` κ°€ λ¶™μ€ ν΄λμ¤λ¥Ό μ°Ύλ”λ‹¤.  λν• `@Controller`, `@Service`, `@Repository` λ“¤μ€ λ¨λ‘  λ‚΄λ¶€μ μΌλ΅ `@Component` λ¥Ό ν¬ν•¨ν•κ³  μλ‹¤λ” μ μ„ μ•κ³ μμ.

#### @Autowired λ΅ μμ΅΄μ„± μ£Όμ…ν•κΈ°

μ¤ν”„λ§μ—μ„ Bean μΈμ¤ν„΄μ¤κ°€ μƒμ„±λλ©΄, @Autowired λ¥Ό μ„¤μ •ν• λ©”μ„λ“κ°€ μλ™μΌλ΅ νΈμ¶λκ³ , νλΌλ―Έν„°μ— λ…μ‹ν• Bean μΈμ¤ν„΄μ¤κ°€ μλ™μΌλ΅ μ£Όμ…λλ‹¤. μ¦‰, μ΄ μ–΄λ…Έν…μ΄μ…μ΄ λ‹¬λ¦° μƒμ„±μ, setter, ν•„λ“λ” μ§μ ‘ ν•΄λ‹Ή κ°μ²΄λ¥Ό μƒμ„±ν•  ν•„μ”μ—†μ΄ Spring IoC Container μ— λ“±λ΅λ Bean μ„ μλ™μΌλ΅ μ£Όμ…(DI) ν•΄μ¤€λ‹¤.

μ„ μ–΄λ…Έν…μ΄μ…μ΄ λ‹¬λ¦¬λ” μ„μΉμ— λ”°λΌ `μƒμ„±μ μ£Όμ…`, `setter μ£Όμ…`, `ν•„λ“ μ£Όμ…` 3κ°€μ§€λ΅ λ‚λ‰λ‹¤. λ‹¤λ§ μƒμ„±μμ— μ–΄λ…Έν…μ΄μ…μ„ λ‹¨ κ²½μ°, μƒμ„±μμ νλΌλ―Έν„°κ°€ Bean μΌλ΅ λ“±λ΅λμ–΄ μμ–΄μ•Ό ν•λ©°, setter μ™€ ν•„λ“ λν• Bean μΌλ΅ λ“±λ΅λμ–΄ μμ–΄μ•Ό IoC Container κ°€ Bean μ„ μλ™μΌλ΅ μ£Όμ…ν•΄μ¤€λ‹¤.


#### μƒμ„±μ μ£Όμ…

~~~java
@RestController
public class UserController {
    private final UserService userService;

    @Autowired
    public UserController(UserService userService) {
        this.userService = userService;
    }

    // ...
}
~~~

#### setter μ£Όμ…

~~~java
@RestController
public class UserController {
    private final UserService userService;

    @Autowired
    public setService(UserService userService) {
        this.userService = userService;
    }

    // ...
}
~~~

#### ν•„λ“ μ£Όμ…

~~~java
@RestController
public class UserController {

    @Autowired
    private final UserService userService;

    // ...
}
~~~

## λ” ν•™μµν•΄λ³Ό ν‚¤μ›λ“

- ApplicationContext, Bean Factory

## μ°Έκ³ 

- https://docs.spring.io/spring-framework/reference/core/beans/introduction.html
- https://dev-wnstjd.tistory.com/440
- https://hudi.blog/spring-bean-and-spring-ioc-container/
- https://velog.io/@rnqjaah1536/Spring-Beanμ΄λ€
- https://f-lab.kr/insight/understanding-spring-framework-and-ioc-di-container?gad_source=1&gclid=CjwKCAjwy8i0BhAkEiwAdFaeGPMHTnKlKL1k0Xh4G3r6Vjbql71d7ns8CAlIiy0M5ffGK9SIGz1vtRoCzr8QAvD_BwE
- https://velog.io/@seasame_oil/Spring-bean