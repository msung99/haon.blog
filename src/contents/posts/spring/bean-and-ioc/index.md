---
title: Spring IoC Container ê³¼ ìŠ¤í”„ë§ ë¹ˆ(Spring Bean)
date: "2024-07-15"
tags:
  - Spring
previewImage: spring.png
---

> ğŸ’¡ í˜„ í¬ìŠ¤íŠ¸ í•™ìŠµë™ê¸°ëŠ” ì§€ë‚œ [ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì œì–´ì˜ ì—­ì „(IoC) ê³¼ ì˜ì¡´ì„± ì£¼ì…(DI)](https://haon.blog/spring/loc/) ì—ì„œ ì´ì–´ì§€ëŠ” ë‚´ìš©ì´ë‹¤.

ì§€ë‚œ í¬ìŠ¤íŠ¸ì—ì„œ `IoC(Inversion Of Control)` ê³¼ `DI(Dependency Injection)` ì— ëŒ€í•´ ë‹¤ë£¨ì—ˆë‹¤. ë‹¤ë§Œ ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” IoC ì»¨í…Œì´ë„ˆì— ê´€í•œ ë‚´ìš©ì„ ìì„¸íˆ ë‹¤ë£¨ì§€ ì•Šê³ , IoC ì™€ DI ë¼ëŠ” ê·¸ ìì²´ì˜ ê°œë…ì— ëŒ€í•´ì„œë§Œ ì§‘ì¤‘ì ìœ¼ë¡œ ë‹¤ë£¨ì—ˆë‹¤. ì´ë²ˆì—ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì–´ë–»ê²Œ IoC ë¥¼ ì œê³µí•˜ëŠ”ì§€, ê°œë°œìê°€ ì–´ë–»ê²Œ DI ë¥¼ ì œê³µí•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ ë‹¤ë£¨ì–´ë³´ê³ ì í•œë‹¤.


## ìŠ¤í”„ë§ ë¹ˆ (Spring Bean)

![alt text](image-1.png)

`ì œì–´ì˜ ì—­ì „(IoC)` ì€ ì œ 3ìì¸ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ê²Œ ê°ì²´ì˜ ìƒëª…ì£¼ê¸°ì— ëŒ€í•œ ì œì–´ê¶Œì„ ë„˜ê²¨ì£¼ëŠ” ê²ƒì„ ëœ»í•œë‹¤ê³  í–ˆë‹¤. ì´ë•Œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ìƒíƒœê³„ì—ì„œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ëœ»í•œë‹¤. ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì œì–´ì˜ ì—­ì „(IoC) ë¡œ ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ”ë°, ì´ë•Œ **ìŠ¤í”„ë§ì´ ì œì–´ ê¶Œí•œì„ ê°€ì ¸ ì§ì ‘ ìƒì„±í•˜ê³  ê´€ê³„ë¥¼ ë¶€ì—¬í•˜ëŠ” ê°ì²´ë¥¼** `Bean` **ì´ë¼ê³  í•œë‹¤.** ì¦‰, Spring Bean ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±, ê´€ê³„ì„±ì •, ì‚¬ìš©ë“±ì„ ì œì–´í•´ì£¼ëŠ” ì œì–´ì˜ ì—­ì „ì´ ì ìš©ëœ ê°ì²´ë¥¼ ëœ»í•œë‹¤.

ìŠ¤í”„ë§ì€ ë‚´ë¶€ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ëŠ” ê²ƒì´ êµ¬í˜„ë˜ì–´ìˆë‹¤. ì´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” IoC Container ë¼ê³ ë„ ë¶ˆë¦¬ëŠ”ë°, ë§ ê·¸ëŒ€ë¡œ IoC ë¥¼ ì œê³µí•´ì£¼ëŠ” íŠ¹ì •í•œ ì»¨í…Œì´ë„ˆ ê³µê°„ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ìˆë‹¤. ì´ ì»¨í…Œì´ë„ˆ ê³µê°„ ì•ˆì—ëŠ” ìŠ¤í”„ë§ì—ì„œ ìì²´ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” Spring Bean ì´ ì¡´ì¬í•œë‹¤. ìš°ë¦¬ëŠ” ê°ì²´ê°„ì˜ ì˜ì¡´ì„± ì •ë³´ë¥¼ `ìƒì„±ì ì£¼ì…` ì„ í†µí•´ ì œê³µí•´ì£¼ê¸°ë§Œ í•˜ë©´, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë‚´ì— Bean ê°ì²´ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê³ , ê´€ë¦¬ëœë‹¤. ì´í›„ í´ë¼ì´ì–¸íŠ¸ê°€ í•„ìš”í•  ë–„ ë§ˆë‹¤ ë§¤ë²ˆ ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ì´ ì•„ë‹Œ, Spring IoC Container ë‚´ì— ìƒì„±ëœ ìŠ¤í”„ë§ Bean ê°ì²´ë¥¼ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ë˜í•œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ëŠ” ì™¸ë¶€ì˜ ì œ 3ìì—ê²Œ ê°ì²´ì˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬ ì œì–´ê¶Œì„ ì›í™œíˆ ë„ë§¡ê¸°ê¸° ìœ„í•´ì„ , ìš°ë¦¬ê°€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ê´€ë¦¬ë  ê° ê°ì²´ë“¤ê°„ì˜ ìµœì†Œí•œì˜ ê´€ê³„(relationship) ì •ë³´, ì¦‰ ì˜ì¡´ê´€ê³„ ì •ë³´ë¥¼ ë„˜ê²¨ì¤˜ì•¼í•œë‹¤. ê·¸ë˜ì•¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì–´ë–¤ ê° ê°ì²´ë“¤ê°„ì˜ ì˜ì¡´ê´€ê³„ë¥¼ íŒŒì•…í•˜ê³ , ìƒí™©ì— ì•Œë§ëŠ” ì˜ì¡´ì„±ì„ ì»¨í…Œì´ë„ˆë‚´ì— ë“±ë¡í•˜ì—¬ ì´í›„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ì œê³µí•´ì¤€ ìµœì†Œí•œì˜ ì˜ì¡´ê´€ê³„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë‚´ì— ê°ì²´(Bean) ë¥¼ ë“±ë¡í•˜ê³ , ê´€ë¦¬í•œë‹¤. ì´í›„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ í•„ìš”í•œ ì˜ì¡´ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì œê³µí•´ì¤€ë‹¤. ì´ë¥¼ `DI(Dependency Injection)` ì´ë¼ê³  í•œë‹¤. **ì¦‰, DI ë€ ì˜ì¡´ì„± ì£¼ì…ì´ë¼ëŠ” ê°œë…ìœ¼ë¡œ, ê°ì²´ê°„ì˜ ì˜ì¡´ì„±ì„ ì™¸ë¶€(ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ)ì—ì„œ ì£¼ì…í•˜ëŠ” ë°©ì‹ì„ ëœ»í•œë‹¤.** 

ìµœì†Œí•œì˜ ì˜ì¡´ê´€ê³„ ì •ë³´ë§Œì„ ì œê³µí•˜ë©´ Spring IoC Container ë‚´ì—ì„œ ìë™ìœ¼ë¡œ ê°ì²´(Bean) ì„ ê´€ë¦¬í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²Œ í•„ìš”í•œ ìœ ì—°í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•´ì¤€ë‹¤. ì´ ì˜ì¡´ê´€ê³„ ì •ë³´ë¥¼ ìŠ¤í”„ë§ì—ê²Œ ì œê³µí•˜ëŠ” ë°©ë²•ì€ ì•„ì£¼ ê°„ë‹¨í•œ ì½”ë“œ(ì–´ë…¸í…Œì´ì…˜ ë“±)ë¥¼ ì‘ì„±í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤. ì´ì— ëŒ€í•œ ë‚´ìš©ì€ ì•„ë˜ì—ì„œ ë‹¤ë£¨ì–´ë³´ê² ë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ Spring IoC Container ë‚´ì— ë“±ë¡ë˜ëŠ” Bean ê°ì²´ë“¤ì€ `ì‹±ê¸€í†¤(SingleTon)` ìœ¼ë¡œ ê´€ë¦¬ëœë‹¤. ë˜í•œ Spring IoC Container ë¡œëŠ” `Bean Factory` ì™€ `Application Context`  ê°€ ì‚¬ìš©ëœë‹¤. ìš”ì¦˜ì€ Bean Factory ë¥¼ í™•ì¥í•œ `Application Context` ë¥¼ ê´€ë¡€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¶”ì„¸ë¼ê³  í•œë‹¤. ì´ë“¤ì— ëŒ€í•œ ì´í•´ë„ëŠ” ì•„ì§ ë†’ì§€ ì•Šê¸° ë–„ë¬¸ì—, ì¶”ê°€ í•™ìŠµì´ í•„ìš”í•˜ë‹¤.


## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— Bean ë“±ë¡í•˜ê¸°

ë°±ë¬¸ì´ë¶ˆì–´ì¼íƒ€. ì§ì ‘ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤ë¡œ ì–´ë–»ê²Œ Bean ì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ëŠ”ì§€ ê°„ë‹¨í•œ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì. 

### Bean ìœ¼ë¡œ ì˜ì¡´ì„± ì£¼ì…í•˜ê¸°

Spring Bean ì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ëŠ” ë°©ë²•ì—ëŠ” í¬ê²Œ 3ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤.

> - (1) xmlì— ì§ì ‘ ë“±ë¡
> - (2) @Bean ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©
> - (3) ì´ë¯¸ ì œê³µë˜ëŠ” ì–´ë…¸í…Œì´ì…˜ í™œìš© : @Component, @Controller, @Service, @Repository ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©

ê³¼ê±°ì—ëŠ” XML ë¡œ ë¹ˆì„ ì„¤ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°©ì‹ì´ ì´ë£¨ì–´ì¡Œì§€ë§Œ, ì´ì    ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ì—¬ ë¹ˆì„ ê°„í¸íˆ ë“±ë¡í•˜ê³ , DI ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ê°œì„ ë˜ì—ˆë‹¤. ì‚¬ì‹¤ìƒ `(1)` ì€ ìš”ì¦˜ ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë°©ë²•ì´ë‹ˆ, ê°€ë³ê²Œë§Œ ë‹¤ë£¨ë„ë¡ í•œë‹¤.

### XML ì— ì§ì ‘ ë“±ë¡í•˜ê¸°

`<bean>` íƒœê·¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. application-config.xml ì„ resource ì•„ë˜ì— ë§Œë“¤ì–´ ì¤€ë‹¤. ê·¸ë¦¬ê³  <beans> íƒœê·¸ ì•ˆì— <bean>ì„ ë§Œë“¤ì–´ ì¤€ë‹¤. ìœ„ì˜ ì½”ë“œëŠ” ì˜ì¡´ì„± ì£¼ì…ê¹Œì§€ í•œ ì½”ë“œì´ë‹¤. 

~~~java
<bean id="helloService" class="com.example.myapp.di.HelloService"/>

<bean id="helloController" class="com.example.myapp.di.HelloController" p:helloService-ref="helloService">		
</bean>
~~~

### @Bean ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©

ìŠ¤í”„ë§ Bean ì„ ë“±ë¡í•˜ëŠ” ê°€ì¥ ê·¼ë³¸ì ì¸ ì½”ë“œì´ë‹¤. ë©”ì†Œë“œ ìœ„ì— @Beaníƒœê·¸ë¥¼ ì‚¬ìš©í•˜ê³  AppConfig ê°ì²´ ìœ„ì— `@Configuration` ì–´ë…¸í…Œì´ì…˜ì„ ëª…ì‹œí•´ì¤€ë‹¤. 

~~~java
@Configuration
public class AppConfig {

    @Bean
    public Item item1() {
        return new ItemImpl1();
    }

    @Bean
    public Store store() {
        return new Store(item1());
    }
}
~~~

ê·¸ë¦¬ê³  ì•„ë˜ì²˜ëŸ¼ Main ì—ì„œ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `AnnotationConfigApplicationContext` ë¥¼ ì‚¬ìš©í•œë‹¤.

~~~java
public class HelloMain {

	public static void main(String[] args) {
		AbstractApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class); 

		System.out.println("-----------------------");
		HelloController controller = context.getBean("helloController", HelloController.class);
		controller.hello("í™ê¸¸ë™");
		System.out.println("=====================");
		context.close();
		}
}
~~~

### ì´ë¯¸ ì œê³µë˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©

![alt text](image-2.png)

ì•ì„  `(2)` ë°©ì‹ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°œë°œìê°€ ì§ì ‘ ì¶”ê°€ì ìœ¼ë¡œ ë“±ë¡í•˜ê³  ì‹¶ì€ íŠ¹ë³„í•œ ê°ì²´ê°€ ì¡´ì¬í•  ë–„ ì£¼ë¡œ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜, ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ìŠ¤í”„ë§ì—ì„œ ì´ë¯¸ ì œê³µí•˜ê³  ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ë“¤ì´ ì¡´ì¬í•œë‹¤. ì´ë“¤ì„ ì¤‘ì‹¬ìœ¼ë¡œ Bean ì„ ìì£¼ ë“±ë¡í•˜ê²Œ ë  ê²ƒì´ë‹¤.

- `@Controller` : í•´ë‹¹ í´ë˜ìŠ¤ê°€ Presentation Layer ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì„ì„ ëª…ì‹œí•¨.
- `@Service` : í•´ë‹¹ í´ë˜ìŠ¤ê°€ Application Layer ì—ì„œ Service ì„ì„ ëª…ì‹œí•¨.
- `@Repository` : í•´ë‹¹ í´ë˜ìŠ¤ê°€ Persistence Layer ì—ì„œ DAO ì„ì„ ëª…ì‹œí•œë‹¤.
- `@Component` : ìœ„ 3ê°€ì§€ ê²½ìš° ì´ì™¸ì— Bean ìœ¼ë¡œ ë“±ë¡í•˜ê³  ì‹¶ì€ í´ë˜ìŠ¤ì— ëª…ì‹œí•œë‹¤.

ìœ„ ì–´ë…¸í…Œì´ì…˜ë“¤ì„ ë¶™ì´ë©´ ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ `ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”`ì„ ì§„í–‰í•˜ì—¬ ê° ê°ì²´ë“¤ê°„ì˜ ì˜ì¡´ê´€ê³„ë¥¼ ì½ì–´ë“¤ì¸ë‹¤. ê·¸ë¦¬ê³  ê·¸ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ Spring Bean ê°ì²´ë¡œ ë“±ë¡í•œë‹¤.

#### @Autowired ë¡œ ì˜ì¡´ì„± ì£¼ì…í•˜ê¸°

ìŠ¤í”„ë§ì—ì„œ Bean ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ë©´, @Autowired ë¥¼ ì„¤ì •í•œ ë©”ì„œë“œê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ê³ , íŒŒë¼ë¯¸í„°ì— ëª…ì‹œí•œ Bean ì¸ìŠ¤í„´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì£¼ì…ëœë‹¤. ì¦‰, ì´ ì–´ë…¸í…Œì´ì…˜ì´ ë‹¬ë¦° ìƒì„±ì, setter, í•„ë“œëŠ” ì§ì ‘ í•´ë‹¹ ê°ì²´ë¥¼ ìƒì„±í•  í•„ìš”ì—†ì´ Spring IoC Container ì— ë“±ë¡ëœ Bean ì„ ìë™ìœ¼ë¡œ ì£¼ì…(DI) í•´ì¤€ë‹¤.

ìœ„ ì–´ë…¸í…Œì´ì…˜ì´ ë‹¬ë¦¬ëŠ” ìœ„ì¹˜ì— ë”°ë¼ `ìƒì„±ì ì£¼ì…`, `setter ì£¼ì…`, `í•„ë“œ ì£¼ì…` 3ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤. ë‹¤ë§Œ ìƒì„±ìì— ì–´ë…¸í…Œì´ì…˜ì„ ë‹¨ ê²½ìš°, ìƒì„±ìì˜ íŒŒë¼ë¯¸í„°ê°€ Bean ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆì–´ì•¼ í•˜ë©°, setter ì™€ í•„ë“œ ë˜í•œ Bean ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆì–´ì•¼ IoC Container ê°€ Bean ì„ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì¤€ë‹¤.


#### ìƒì„±ì ì£¼ì…

~~~java
@RestController
public class UserController {
    private final UserService userService;

    @Autowired
    public UserController(UserService userService) {
        this.userService = userService;
    }

    // ...
}
~~~

#### setter ì£¼ì…

~~~java
@RestController
public class UserController {
    private final UserService userService;

    @Autowired
    public setService(UserService userService) {
        this.userService = userService;
    }

    // ...
}
~~~

#### í•„ë“œ ì£¼ì…

~~~java
@RestController
public class UserController {

    @Autowired
    private final UserService userService;

    // ...
}
~~~

## ë” í•™ìŠµí•´ë³¼ í‚¤ì›Œë“œ

- ApplicationContext, Bean Factory

## ì°¸ê³ 

- https://docs.spring.io/spring-framework/reference/core/beans/introduction.html
- https://dev-wnstjd.tistory.com/440
- https://hudi.blog/spring-bean-and-spring-ioc-container/
- https://velog.io/@rnqjaah1536/Spring-Beanì´ë€
- https://f-lab.kr/insight/understanding-spring-framework-and-ioc-di-container?gad_source=1&gclid=CjwKCAjwy8i0BhAkEiwAdFaeGPMHTnKlKL1k0Xh4G3r6Vjbql71d7ns8CAlIiy0M5ffGK9SIGz1vtRoCzr8QAvD_BwE